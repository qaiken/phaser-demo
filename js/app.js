!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./phaserDemo"),e=a("./utils");d.Game=function(a){this.score=0,this.level=0,this.highScore=document.querySelector(".score-value"),this.currLevel=document.querySelector(".level-value")},d.Game.prototype={create:function(){this.initScene(),this.buildWorld()},initScene:function(){this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),this.platforms=this.add.group(),this.platforms.enableBody=!0,this.initAudio(["pickup_1","pickup_2","jump","boom","win"]),this.scoreText=this.add.text(16,16,"score: 0",{fontSize:"32px",fill:"#000"}),this.cursors=this.input.keyboard.createCursorKeys()},drawPlatforms:function(){var a,b,c,d=[],f=e.randomNumber(1,3),g=this.platforms.create(0,this.world.height-64,"ground"),h=function(a){return d.forEach(function(b){for(;Math.abs(b-a)<82;)a-=5}),a};g.scale.setTo(2,2),g.body.immovable=!0,b=e.randomNumber(-200,100),c=e.randomNumber(350,400),a=this.platforms.create(b,c,"ground"),a.body.immovable=!0,d.push(c),b=e.randomNumber(150,250),c=e.randomNumber(300,350),c=h(c),d.push(c),a=this.platforms.create(b,c,"ground"),a.body.immovable=!0;for(var i=0;f>i&&(b=e.randomNumber(-200,600),c=e.randomNumber(250,400),c=h(c),!(82>c));++i)d.push(c),a=this.platforms.create(b,c,"ground"),a.body.immovable=!0},drawPlayer:function(){this.player=this.add.sprite(32,this.world.height-150,"dude"),this.physics.arcade.enable(this.player),this.player.body.bounce.y=.2,this.player.body.gravity.y=300,this.player.body.friction=.95,this.player.body.collideWorldBounds=!0,this.player.animations.add("left",[0,1,2,3],10,!0),this.player.animations.add("right",[5,6,7,8],10,!0)},drawBaddies:function(){var a,b;this.baddies=this.add.group(),this.baddies.enableBody=!0;for(var c=0;c<3+this.level;c++)b=e.randomNumber(0,this.world.width-32),a=this.baddies.create(b,0,"baddie"),a.body.bounce.y=.2,a.body.gravity.y=300,a.body.collideWorldBounds=!0,a.animations.add("left",[0,1],10,!0),a.animations.add("right",[2,3],10,!0),this.physics.arcade.enable(a)},drawStars:function(a){var b,c=this.world.width/a;this.stars=this.add.group(),this.stars.enableBody=!0;for(var d=0;a>d;d++)b=this.stars.create(d*c+11,0,"star"),b.body.gravity.y=300,b.body.bounce.y=.7+.2*Math.random()},drawDiamonds:function(a){var b,c;this.diamonds=this.add.group(),this.diamonds.enableBody=!0;for(var d=0;a>d;d++)c=e.randomNumber(0,this.world.width-32),b=this.diamonds.create(c,0,"diamond"),b.body.gravity.y=600,b.body.bounce.y=.2+.2*Math.random()},movePlayer:function(){this.cursors.left.isDown?(this.player.body.velocity.x=-150,this.player.animations.play("left")):this.cursors.right.isDown?(this.player.body.velocity.x=150,this.player.animations.play("right")):(this.player.animations.stop(),this.player.frame=4),this.player.body.touching.down&&(this.cursors.up.isDown&&(this.jump.play(),this.player.body.velocity.y=-350),!this.cursors.left.isDown&&!this.cursors.right.isDown&&Math.abs(this.player.body.velocity.x)>0&&(this.player.body.velocity.x*=this.player.body.friction,Math.abs(this.player.body.velocity.x)<.1&&(this.player.body.velocity.x=0)))},moveBaddies:function(){var a=[{animation:"left",frame:1},{animation:"right",frame:2}],b=function(c){var d=e.randomNumber(0,1),f=a[d],g=e.randomNumber(50,100),h=e.randomNumber(1e3,5e3);"left"===f.animation?(c.body.velocity.x=-g,c.animations.play("left")):(c.body.velocity.x=g,c.animations.play("right")),setTimeout(function(){c.body.velocity.x=0,c.animations.stop(),c.frame=e.randomNumber(1,2),setTimeout(function(){b(c)},h)},h)};this.baddies.forEach(b)},checkBaddieWallCollision:function(){this.baddies.forEach(function(a){a.body.x<=0?(a.animations.stop(),a.body.velocity.x=e.randomNumber(50,100),a.animations.play("right")):a.body.x>=this.world.width-a.width&&(a.animations.stop(),a.body.velocity.x=-e.randomNumber(50,100),a.animations.play("left"))}.bind(this))},checkObjectCollisions:function(){this.physics.arcade.collide(this.player,this.platforms),this.physics.arcade.collide(this.baddies,this.platforms),this.physics.arcade.collide(this.stars,this.platforms),this.physics.arcade.collide(this.diamonds,this.platforms),this.physics.arcade.overlap(this.player,this.stars,this.collectPoints,null,this),this.physics.arcade.overlap(this.player,this.diamonds,this.collectPoints,null,this),this.physics.arcade.overlap(this.player,this.baddies,this.gameOver,null,this)},buildWorld:function(){this.drawPlatforms(),this.drawBaddies(),this.moveBaddies(),this.drawStars(e.randomNumber(6,12)),this.drawDiamonds(e.randomNumber(1,3)),this.drawPlayer()},checkIfWon:function(){0===this.stars.total&&0===this.diamonds.total&&(this.win.play(),this.currLevel.textContent=++this.level+1,this.reset())},gameOver:function(){this.boom.play(),this.score=0,this.level=0,this.currLevel.textContent=1,this.scoreText.text="Score: "+this.score,this.reset()},initAudio:function(a){a.forEach(function(a){this[a]=this.add.audio(a),this[a].volume=.2}.bind(this))},reset:function(){this.player.kill(),this.killEm(this.stars),this.killEm(this.diamonds),this.killEm(this.baddies),this.killEm(this.platforms),this.buildWorld()},killEm:function(a){a.children.forEach(function(a){a.kill()})},collectPoints:function(a,b){var c,d=b.key;"diamond"===d?(c=10,this.pickup_2.play()):(c=1,this.pickup_1.play()),b.kill(),this.score+=c,this.score>+this.highScore.textContent&&(this.highScore.textContent=this.score),this.scoreText.text="Score: "+this.score},update:function(){this.checkObjectCollisions(),this.movePlayer(),this.checkBaddieWallCollision(),this.checkIfWon()}},b.exports=d.Game},{"./phaserDemo":4,"./utils":5}],2:[function(a,b,c){var d=a("./phaserDemo");d.Preloader=function(a){},d.Preloader.prototype={preload:function(){this.load.image("sky","img/sky.png"),this.load.image("diamond","img/diamond.png"),this.load.image("ground","img/platform.png"),this.load.image("star","img/star.png"),this.load.image("sky","img/sky.png"),this.load.spritesheet("baddie","img/baddie.png",32,32),this.load.spritesheet("dude","img/dude.png",32,48),this.load.audio("pickup_1","audio/pickup-1.wav"),this.load.audio("pickup_2","audio/pickup-2.wav"),this.load.audio("boom","audio/boom.wav"),this.load.audio("win","audio/win.wav"),this.load.audio("jump","audio/jump.wav")},update:function(){this.cache.isSoundDecoded("jump")&&this.state.start("Game")}},b.exports=d.Preloader},{"./phaserDemo":4}],3:[function(a,b,c){var d=window.Phaser,e=a("./Preloader"),f=a("./Game"),g=new d.Game(800,600,d.AUTO,"game-container");g.state.add("Preloader",e),g.state.add("Game",f),g.state.start("Preloader")},{"./Game":1,"./Preloader":2}],4:[function(a,b,c){b.exports={}},{}],5:[function(a,b,c){b.exports={randomNumber:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)}}},{}]},{},[3]);